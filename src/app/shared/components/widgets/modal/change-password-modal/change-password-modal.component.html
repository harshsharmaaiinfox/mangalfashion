<ng-template #passwordModal let-modal>
    <div class="modern-modal-header">
        <div class="modal-header-content">
            <div class="modal-icon-wrapper">
                <i class="ri-lock-password-line"></i>
            </div>
            <div class="modal-title-content">
                <h3 class="modal-title">{{ 'Change_password' | translate }}</h3>
                <p class="modal-subtitle">{{ 'Update your account password' | translate }}</p>
            </div>
        </div>
        <button type="button" class="btn-close-modal" (click)="modal.dismiss('Cross click')">
            <i class="ri-close-line"></i>
        </button>
    </div>
    <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="modern-modal-body">
            <div class="password-form-fields">
                <div class="form-field-wrapper">
                    <label class="form-label-modern" for="cpass">
                        <i class="ri-lock-line"></i>
                        <span>{{ 'Current Password' | translate }}</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            class="form-input-modern" 
                            id="cpass" 
                            type="password" 
                            placeholder="{{ 'Enter Current Password' | translate }}" 
                            formControlName="current_password"
                            [class.is-invalid]="form?.controls?.['current_password']?.touched && form.controls['current_password']?.errors?.['required']" />
                        <i class="ri-eye-off-line input-icon-right password-toggle" (click)="togglePasswordVisibility('cpass')"></i>
                    </div>
                    <div class="error-message" *ngIf="form?.controls?.['current_password']?.touched && form.controls['current_password']?.errors?.['required']">
                        <i class="ri-error-warning-line"></i>
                        <span>{{ 'Current Password is Required' | translate }}</span>
                    </div>
                </div>

                <div class="form-field-wrapper">
                    <label class="form-label-modern" for="npass">
                        <i class="ri-key-line"></i>
                        <span>{{ 'New Password' | translate }}</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            class="form-input-modern" 
                            id="npass" 
                            type="password" 
                            placeholder="{{ 'Enter New Password' | translate }}" 
                            formControlName="password"
                            [class.is-invalid]="form?.controls?.['password']?.touched && form.controls['password']?.errors?.['required']" />
                        <i class="ri-eye-off-line input-icon-right password-toggle" (click)="togglePasswordVisibility('npass')"></i>
                    </div>
                    <div class="error-message" *ngIf="form?.controls?.['password']?.touched && form.controls['password']?.errors?.['required']">
                        <i class="ri-error-warning-line"></i>
                        <span>{{ 'New Password is Required' | translate }}</span>
                    </div>
                </div>

                <div class="form-field-wrapper">
                    <label class="form-label-modern" for="cnpass">
                        <i class="ri-shield-check-line"></i>
                        <span>{{ 'Confirm Password' | translate }}</span>
                    </label>
                    <div class="input-wrapper">
                        <input 
                            class="form-input-modern" 
                            id="cnpass" 
                            type="password" 
                            placeholder="{{ 'Enter Confirm Password' | translate }}" 
                            formControlName="password_confirmation"
                            [class.is-invalid]="(form?.controls?.['password_confirmation']?.touched && form.controls['password_confirmation']?.errors?.['required']) || passwordMatchError" />
                        <i class="ri-eye-off-line input-icon-right password-toggle" (click)="togglePasswordVisibility('cnpass')"></i>
                    </div>
                    <div class="error-message" *ngIf="form?.controls?.['password_confirmation']?.touched && form.controls['password_confirmation']?.errors?.['required'] && !passwordMatchError">
                        <i class="ri-error-warning-line"></i>
                        <span>{{ 'Confirm Password is Required' | translate }}</span>
                    </div>
                    <div class="error-message" *ngIf="passwordMatchError">
                        <i class="ri-error-warning-line"></i>
                        <span>{{ 'Confirm Password Does Not Matched' | translate }}</span>
                    </div>
                </div>
            </div>

            <div class="modern-modal-footer">
                <button 
                    type="button" 
                    class="btn-cancel" 
                    (click)="modal.dismiss('Cancel')">
                    {{ 'Cancel' | translate }}
                </button>
                <button 
                    type="submit" 
                    class="btn-submit">
                    <i class="ri-check-line"></i>
                    <span>{{ 'Update Password' | translate }}</span>
                </button>
            </div>
        </div>
    </form>
</ng-template>
